/*!
 * Torro Forms Version 1.0.0-beta.7 (http://torro-forms.com)
 * Licensed under GNU General Public License v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
!function(t,e,r,i){function n(t){this.translations=t,this.selectors={show_entry:".torro-show-entry",hide_entry:".torro-hide-entry",entries:"#torro-entries",entries_table:"#torro-entries-table",entry:"#torro-entry",entries_slider:"#torro-entries .torro-slider",entries_slider_start_content:"#torro-entries .torro-slider-middle",entries_slider_left:"#torro-entries .torro-slider-left",entries_slider_middle:"#torro-entries .torro-slider-middle",entries_slider_right:"#torro-entries .torro-slider-right",entries_nav:".torro-nav-button"}}n.prototype={init:function(){this.init_show_entry(),this.init_hide_entry(),this.init_nav_link(),this.init_results_deletion()},init_show_entry:function(){var t=this;r(this.selectors.entries).on("click",this.selectors.show_entry,function(i){var n=r(this);i.preventDefault(),n.hasClass("button")?(n.addClass("button-loading"),e.ajax.post("torro_show_entry",{nonce:t.translations.nonce_show_entry,form_id:t.get_form_id(),result_id:n.attr("rel")}).done(function(e){r(t.selectors.entries_slider_middle).animate({marginLeft:"-100%"}),r(t.selectors.entries_slider_right).html(e.html),r(t.selectors.entries_slider_right).show(),r(t.selectors.entries_slider_right).animate({marginLeft:"0"}),n.removeClass("button-loading"),t.init_hide_entry()}).fail(function(t){console.log(t)})):n.addClass("button")})},init_hide_entry:function(){var t=this;r(this.selectors.entries).on("click",this.selectors.hide_entry,function(e){e.preventDefault(),r(t.selectors.entries_slider_middle).animate({marginLeft:"0"}),r(t.selectors.entries_slider_right).animate({marginLeft:"100%"}),r(t.selectors.entries_slider_right).hide()})},init_nav_link:function(){var t=this;r(this.selectors.entries).on("click",this.selectors.entries_nav,function(i){var n=r(this);n.addClass("button-loading"),i.preventDefault();var s=r(this).attr("href");e.ajax.post("torro_show_entries",{nonce:t.translations.nonce_show_entries,form_id:t.get_form_id(),start:t.get_url_param_value(s,"torro-entries-start"),length:t.get_url_param_value(s,"torro-entries-length")}).done(function(e){r(t.selectors.entries_slider_start_content).fadeOut(500,function(){r(t.selectors.entries_slider_start_content).html(e.html),r(t.selectors.entries_slider_start_content).fadeIn(500)}),n.removeClass("button-loading")}).fail(function(t){console.log(t)})})},init_results_deletion:function(){var t=this;r(document).on("torro.delete_results",function(e,i){r(t.selectors.entries_slider_middle).html(i.html),r(t.selectors.entries_slider_middle).animate({marginLeft:"0"}),r(t.selectors.entries_slider_right).animate({marginLeft:"100%"}).hide()})},get_form_id:function(){return r("#post_ID").val()},get_url_param_value:function(t,e){var r=t.split("?");r=r[1],r=r.split("&");for(var i=0;i<r.length;i++){var n=r[i].split("=");if(n[0]==e)return n[1]}}},t.add_extension("result_entries",new n(i))}(form_builder,wp,jQuery,translation_entries);